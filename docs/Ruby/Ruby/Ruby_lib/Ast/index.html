<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ast (Ruby.Ruby_lib.Ast)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Ruby</a> &#x00BB; <a href="../index.html">Ruby_lib</a> &#x00BB; Ast</nav><header class="odoc-preamble"><h1>Module <code><span>Ruby_lib.Ast</span></code></h1><p>Copyright 2021-2022, Kakadu and contributors</p></header><div class="odoc-content"><p>SPDX-License-Identifier: LGPL-3.0-or-later</p><p>Ast types for literals</p><div class="odoc-spec"><div class="spec type" id="type-ruby_literal" class="anchored"><a href="#type-ruby_literal" class="anchor"></a><code><span><span class="keyword">type</span> ruby_literal</span><span> = </span></code><table><tr id="type-ruby_literal.BoolL" class="anchored"><td class="def variant constructor"><a href="#type-ruby_literal.BoolL" class="anchor"></a><code><span>| </span><span><span class="constructor">BoolL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Bool literal</p><span class="comment-delim">*)</span></td></tr><tr id="type-ruby_literal.IntegerL" class="anchored"><td class="def variant constructor"><a href="#type-ruby_literal.IntegerL" class="anchor"></a><code><span>| </span><span><span class="constructor">IntegerL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Integer literal</p><span class="comment-delim">*)</span></td></tr><tr id="type-ruby_literal.StringL" class="anchored"><td class="def variant constructor"><a href="#type-ruby_literal.StringL" class="anchor"></a><code><span>| </span><span><span class="constructor">StringL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>String literal</p><span class="comment-delim">*)</span></td></tr><tr id="type-ruby_literal.NilL" class="anchored"><td class="def variant constructor"><a href="#type-ruby_literal.NilL" class="anchor"></a><code><span>| </span><span><span class="constructor">NilL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Nil literal</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-ast" class="anchored"><a href="#type-ast" class="anchor"></a><code><span><span class="keyword">type</span> ast</span><span> = </span></code><table><tr id="type-ast.Literal" class="anchored"><td class="def variant constructor"><a href="#type-ast.Literal" class="anchor"></a><code><span>| </span><span><span class="constructor">Literal</span> <span class="keyword">of</span> <a href="#type-ruby_literal">ruby_literal</a> * <span class="xref-unresolved">Base</span>.string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Literal <code>literal_type literal_as_string</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.ArrayDecl" class="anchored"><td class="def variant constructor"><a href="#type-ast.ArrayDecl" class="anchor"></a><code><span>| </span><span><span class="constructor">ArrayDecl</span> <span class="keyword">of</span> <span><a href="#type-ast">ast</a> <span class="xref-unresolved">Base</span>.list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>ArrayDecl <code>initial_content</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.Var" class="anchored"><td class="def variant constructor"><a href="#type-ast.Var" class="anchor"></a><code><span>| </span><span><span class="constructor">Var</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Var <code>var_name</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.VarAssign" class="anchored"><td class="def variant constructor"><a href="#type-ast.VarAssign" class="anchor"></a><code><span>| </span><span><span class="constructor">VarAssign</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.string * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>VarAssign <code>var_name new_value</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.Conditional" class="anchored"><td class="def variant constructor"><a href="#type-ast.Conditional" class="anchor"></a><code><span>| </span><span><span class="constructor">Conditional</span> <span class="keyword">of</span> <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Conditional <code>condition then_branch else_branch</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.WhileLoop" class="anchored"><td class="def variant constructor"><a href="#type-ast.WhileLoop" class="anchor"></a><code><span>| </span><span><span class="constructor">WhileLoop</span> <span class="keyword">of</span> <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>WhileLoop <code>condition body</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.Binop" class="anchored"><td class="def variant constructor"><a href="#type-ast.Binop" class="anchor"></a><code><span>| </span><span><span class="constructor">Binop</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.string * <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Binop <code>op left right</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.Seq" class="anchored"><td class="def variant constructor"><a href="#type-ast.Seq" class="anchor"></a><code><span>| </span><span><span class="constructor">Seq</span> <span class="keyword">of</span> <span><a href="#type-ast">ast</a> <span class="xref-unresolved">Base</span>.list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Seq <code>expressions</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.Indexing" class="anchored"><td class="def variant constructor"><a href="#type-ast.Indexing" class="anchor"></a><code><span>| </span><span><span class="constructor">Indexing</span> <span class="keyword">of</span> <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Indexing <code>box index</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.IndexAssign" class="anchored"><td class="def variant constructor"><a href="#type-ast.IndexAssign" class="anchor"></a><code><span>| </span><span><span class="constructor">IndexAssign</span> <span class="keyword">of</span> <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>IndexAssign <code>box index new_value</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.FuncDeclaration" class="anchored"><td class="def variant constructor"><a href="#type-ast.FuncDeclaration" class="anchor"></a><code><span>| </span><span><span class="constructor">FuncDeclaration</span> <span class="keyword">of</span> <a href="#type-func_scope">func_scope</a> * <span class="xref-unresolved">Base</span>.string * <span><span class="xref-unresolved">Base</span>.string <span class="xref-unresolved">Base</span>.list</span> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>FunctionDeclaration <code>func_scope name param_names body</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.Invocation" class="anchored"><td class="def variant constructor"><a href="#type-ast.Invocation" class="anchor"></a><code><span>| </span><span><span class="constructor">Invocation</span> <span class="keyword">of</span> <a href="#type-ast">ast</a> * <span><a href="#type-ast">ast</a> <span class="xref-unresolved">Base</span>.list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Invocation <code>target param_values</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.MethodAccess" class="anchored"><td class="def variant constructor"><a href="#type-ast.MethodAccess" class="anchor"></a><code><span>| </span><span><span class="constructor">MethodAccess</span> <span class="keyword">of</span> <a href="#type-ast">ast</a> * <span class="xref-unresolved">Base</span>.string * <span><a href="#type-ast">ast</a> <span class="xref-unresolved">Base</span>.list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>MethodAccess <code>object method params</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-ast.ClassDeclaration" class="anchored"><td class="def variant constructor"><a href="#type-ast.ClassDeclaration" class="anchor"></a><code><span>| </span><span><span class="constructor">ClassDeclaration</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.string * <span><a href="#type-ast">ast</a> <span class="xref-unresolved">Base</span>.list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>ClassDeclaration <code>name members</code></p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Ast types used in parsing</p></div></div><div class="odoc-spec"><div class="spec type" id="type-func_scope" class="anchored"><a href="#type-func_scope" class="anchor"></a><code><span><span class="keyword">and</span> func_scope</span><span> = </span></code><table><tr id="type-func_scope.TopLevel" class="anchored"><td class="def variant constructor"><a href="#type-func_scope.TopLevel" class="anchor"></a><code><span>| </span><span><span class="constructor">TopLevel</span></span></code></td></tr><tr id="type-func_scope.Method" class="anchored"><td class="def variant constructor"><a href="#type-func_scope.Method" class="anchor"></a><code><span>| </span><span><span class="constructor">Method</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-value" class="anchored"><a href="#type-value" class="anchor"></a><code><span><span class="keyword">type</span> value</span><span> = </span></code><table><tr id="type-value.Bool" class="anchored"><td class="def variant constructor"><a href="#type-value.Bool" class="anchor"></a><code><span>| </span><span><span class="constructor">Bool</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.bool</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Bool <code>value</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.Integer" class="anchored"><td class="def variant constructor"><a href="#type-value.Integer" class="anchor"></a><code><span>| </span><span><span class="constructor">Integer</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Integer <code>value</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.String" class="anchored"><td class="def variant constructor"><a href="#type-value.String" class="anchor"></a><code><span>| </span><span><span class="constructor">String</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>String <code>value</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.Array" class="anchored"><td class="def variant constructor"><a href="#type-value.Array" class="anchor"></a><code><span>| </span><span><span class="constructor">Array</span> <span class="keyword">of</span> <span><span><a href="#type-value">value</a> <span class="xref-unresolved">Base</span>.list</span> <span class="xref-unresolved">Base</span>.ref</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Array <code>value_list</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.Function" class="anchored"><td class="def variant constructor"><a href="#type-value.Function" class="anchor"></a><code><span>| </span><span><span class="constructor">Function</span> <span class="keyword">of</span> <span class="xref-unresolved">Base</span>.string * <span><span class="xref-unresolved">Base</span>.string <span class="xref-unresolved">Base</span>.list</span> * <a href="#type-ast">ast</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Function <code>name param_list body</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.Class" class="anchored"><td class="def variant constructor"><a href="#type-value.Class" class="anchor"></a><code><span>| </span><span><span class="constructor">Class</span> <span class="keyword">of</span> <a href="#type-class_state">class_state</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Class <code>initial_state</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.ClassInstance" class="anchored"><td class="def variant constructor"><a href="#type-value.ClassInstance" class="anchor"></a><code><span>| </span><span><span class="constructor">ClassInstance</span> <span class="keyword">of</span> <span><a href="#type-class_state">class_state</a> <span class="xref-unresolved">Base</span>.ref</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>ClassInstance <code>shared_instance_state</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-value.Nil" class="anchored"><td class="def variant constructor"><a href="#type-value.Nil" class="anchor"></a><code><span>| </span><span><span class="constructor">Nil</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Nil</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Data types used in runtime</p></div></div><div class="odoc-spec"><div class="spec type" id="type-class_state" class="anchored"><a href="#type-class_state" class="anchor"></a><code><span><span class="keyword">and</span> class_state</span><span> =
  <span><span>( <span class="xref-unresolved">Base</span>.string, <a href="#type-value">value</a>, <span class="xref-unresolved">Base</span>.String.comparator_witness )</span> <span class="xref-unresolved">Base</span>.Map.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-state" class="anchored"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">and</span> state</span><span> = </span><span>{</span></code><table><tr id="type-state.local_vars" class="anchored"><td class="def record field"><a href="#type-state.local_vars" class="anchor"></a><code><span>local_vars : <span><span>( <span class="xref-unresolved">Base</span>.string, <a href="#type-value">value</a>, <span class="xref-unresolved">Base</span>.String.comparator_witness )</span> <span class="xref-unresolved">Base</span>.Map.t</span>;</span></code></td></tr><tr id="type-state.class_scopes" class="anchored"><td class="def record field"><a href="#type-state.class_scopes" class="anchor"></a><code><span>class_scopes : <span><span><a href="#type-class_state">class_state</a> <span class="xref-unresolved">Base</span>.ref</span> <span class="xref-unresolved">Base</span>.list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div></div></body></html>